USE_OCAMLFIND = true
OCAMLPACKS[] = 
    equeue
    pcre
    str
NATIVE_ENABLED = true
BYTE_ENABLED = true
OCAMLCFLAGS += -g

.DEFAULT: ircd

OCamlProgram(ircd, ircd irc command iobuf client channel)

section
    OCAMLPACKS[] +=
        oUnit
    NATIVE_ENABLED = false

    tests.cmx:
    tests.cmi:
    tests.cmo:
    tests$(EXT_OBJ):

    OCamlProgram(tests, tests chat irc command iobuf client channel)

.PHONY: clean
clean:
	rm $(filter-proper-targets $(ls R, .))
